<script setup lang="ts">
const token = useCookie("token");
const role = useCookie("role");
const isPrivileged = computed(() => {
	return role.value === "ADMIN" || role.value === "SUPERVISOR";
});
</script>

<template>
	<header class="header">
		<nav class="header__nav">
			<div class="header__main">
				<svg
					class="header__logo"
					width="60"
					height="54"
					viewBox="0 0 60 54"
					fill="none"
					xmlns="http://www.w3.org/2000/svg"
				>
					<path
						d="M33.8403 23.1476C34.6514 24.7051 35.3831 26.2857 35.262 27.9593C35.2087 28.6994 35.4353 29.3393 35.9537 29.9904C37.1876 31.5404 38.4997 33.0655 39.2041 34.7818C39.6193 35.7933 39.5817 36.611 38.7422 37.6152C37.2362 39.4165 36.2135 41.394 34.9832 43.2962C34.2299 44.4615 33.7565 45.6767 33.7822 46.9422C33.804 48.0099 34.5004 48.9273 35.6366 49.6909C36.0818 49.99 36.5283 50.2881 36.9843 50.5933C36.7763 51.0565 36.21 51.1982 35.612 51.2202C34.8871 51.2468 34.1551 51.1932 33.4267 51.1699C33.1582 51.1613 32.8908 51.1404 32.6504 51.1265C31.7887 52.1273 30.959 53.091 30.1763 54C29.3455 53.0894 28.4711 52.131 27.5485 51.1192C26.9138 51.155 26.2881 51.2134 25.6617 51.2189C25.0729 51.2241 24.465 51.2238 23.8979 51.1352C23.1046 51.011 23.0125 50.706 23.6294 50.3522C25.0729 49.5243 26.1315 48.5643 26.3767 47.2633C26.5606 46.286 26.2707 45.3755 25.744 44.4733C24.5746 42.4706 23.4617 40.4531 22.254 38.4609C21.8751 37.8362 21.3029 37.257 20.7476 36.6874C20.4728 36.4055 20.4162 36.1589 20.5179 35.8417C21.1028 34.0148 22.2389 32.338 23.6357 30.7292C23.7041 30.6505 23.7591 30.5668 23.8303 30.4894C24.5671 29.6855 24.8731 28.8547 24.8174 27.8772C24.7233 26.2308 25.4414 24.6497 26.3589 23.1201C26.3882 23.071 26.4483 23.0299 26.5653 22.9154C26.4131 24.1816 26.1592 25.3712 27.1665 26.5854C27.3907 26.345 27.6256 26.1805 27.7118 25.987C28.7092 23.7501 29.4969 21.4852 29.735 19.1489C29.7722 18.7846 29.894 18.424 29.977 18.0615L30.2361 18.0589C30.3001 18.2948 30.4117 18.5299 30.4211 18.7668C30.5176 21.1805 31.5727 23.4752 32.4234 25.794C32.5175 26.0506 32.8434 26.2697 33.1131 26.5616C34.1437 25.4394 33.8435 24.2885 33.8403 23.1476Z"
						fill="#911D28"
					/>
					<path
						d="M59.499 34.0305C59.0624 33.4874 58.7472 33.0331 58.3458 32.615C57.9812 32.2347 57.5861 31.8493 57.0941 31.5438C55.6974 30.6762 53.9787 30.7546 52.8979 31.7957C52.167 32.4994 51.6146 33.2936 51.0874 34.0781C50.2898 35.2659 49.6701 36.508 48.8202 37.678C47.02 40.1563 44.3336 42.1184 40.6772 43.4699C40.5241 43.5264 40.3659 43.5771 40.0757 43.6765C40.7218 43.1401 41.3147 42.7042 41.8114 42.2246C43.0417 41.0371 44.0034 39.7727 43.9785 38.2832C43.973 37.9539 43.9081 37.6174 43.7871 37.2983C42.7949 34.6838 41.5851 32.1179 39.9527 29.6403C39.6786 29.2243 39.6984 28.7067 39.6905 28.2352C39.6814 27.6782 39.7095 27.1105 39.8625 26.5647C40.3276 24.9021 41.3811 23.4358 43.3655 22.3134C43.4126 22.2867 43.4881 22.282 43.7574 22.218C43.5241 23.4219 43.5036 24.5629 44.389 25.6149C45.2531 26.6416 46.4023 27.4625 48.1645 28.0807C48.7526 25.7894 48.2923 23.6803 47.0264 21.6565C45.7799 19.6641 44.1371 17.822 41.6389 16.3696C41.6413 16.322 41.6437 16.2744 41.646 16.2266C41.9308 16.2064 42.2396 16.1293 42.4967 16.1761C43.7309 16.4002 44.9616 16.6384 46.1753 16.9075C50.1794 17.7946 53.2399 19.4894 55.6199 21.7635C57.5865 23.6429 58.907 25.7025 59.5971 27.9392C60.1859 29.8474 60.0574 31.7622 59.671 33.677C59.654 33.7614 59.5927 33.842 59.4994 34.031L59.499 34.0305Z"
						fill="#911D28"
					/>
					<path
						d="M20.2391 43.678C17.6302 42.7813 15.569 41.6362 13.8558 40.2097C11.8481 38.5381 10.636 36.6001 9.50492 34.6278C9.0446 33.8247 8.51625 33.0271 7.8669 32.2849C6.38469 30.5919 4.07438 30.5512 2.39088 32.1735C1.83762 32.7065 1.43227 33.3069 0.962452 33.8775C0.845789 34.0195 0.740991 34.1657 0.461 34.3114C0.376766 34.0737 0.256544 33.8386 0.213834 33.5975C-0.161463 31.4766 -0.066947 29.3712 0.690766 27.2857C1.40735 25.3126 2.94255 23.5971 4.47063 21.8699C6.04419 20.0911 8.54196 18.9985 10.9978 17.8639C13.0712 16.906 15.5397 16.6358 17.8848 16.1531C18.0751 16.1138 18.2997 16.1478 18.3084 16.0801C17.9406 16.4193 17.5973 16.7715 17.2015 17.0961C13.5316 20.106 11.1623 23.4138 11.7662 27.4063C11.799 27.6241 11.901 27.8375 12.0023 28.1495C13.7222 27.5284 14.9034 26.6981 15.7758 25.6374C16.6581 24.565 16.5755 23.4078 16.5363 22.2227C17.5281 22.6978 18.3772 23.1934 18.8992 23.8963C19.8056 25.117 20.3383 26.3738 20.4609 27.7593C20.5392 28.644 20.2652 29.3835 19.7803 30.1552C18.4444 32.2802 17.3102 34.4406 16.5838 36.706C15.9008 38.8365 16.7645 40.6438 18.6097 42.3313C19.0772 42.7591 19.6059 43.1576 20.2387 43.6783L20.2391 43.678Z"
						fill="#911D28"
					/>
					<path
						d="M24.6663 0.129708C23.3969 0.500002 22.5118 1.16554 21.8257 1.91214C20.8058 3.02198 19.9231 4.18726 18.9846 5.32979C18.9305 5.39569 18.8589 5.47257 18.8676 5.54056C19.0092 6.65066 18.6963 7.79502 19.7609 8.82065C20.9066 9.92395 21.9404 11.0801 22.9678 12.2346C24.4504 13.9004 25.477 15.6886 25.9654 17.5963C26.2189 18.5867 25.9468 19.555 25.3702 20.4821C25.288 20.6141 25.1488 20.7302 25.0709 20.8155C24.7304 19.673 24.4832 18.5108 24.0284 17.3855C23.0536 14.9737 21.2851 12.8617 18.4852 11.1321C16.8483 10.1211 15.8316 8.79241 14.7646 7.5071C14.6511 7.37033 14.6828 7.11431 14.8026 6.97022C15.9048 5.64516 16.9974 4.31461 18.1882 3.02433C18.6936 2.47674 19.3299 1.94222 20.0785 1.54211C21.0747 1.00994 22.2192 0.592053 23.3415 0.173641C23.7069 0.0373956 24.2024 0.0536091 24.6386 0C24.6477 0.0431487 24.6568 0.0862975 24.6663 0.129185V0.129708Z"
						fill="#911D28"
					/>
					<path
						d="M35.4499 0.0972727C36.3021 -0.0855211 36.9886 0.162127 37.67 0.458676C38.251 0.711554 38.8794 0.919191 39.4409 1.18881C39.9918 1.45319 40.5973 1.71731 40.9809 2.07453C41.998 3.02145 42.9333 4.00838 43.8524 4.99923C44.4135 5.60436 44.8529 6.25865 45.4093 6.86614C45.7091 7.19328 45.6011 7.44381 45.3611 7.74402C44.2716 9.10882 42.8293 10.3055 41.177 11.3722C37.9176 13.4765 36.2471 16.0563 35.6706 18.9933C35.5416 19.6505 35.4317 20.3095 35.1814 21.026C34.9101 20.6037 34.566 20.1949 34.3805 19.7566C33.7806 18.3382 34.1369 16.9473 34.9726 15.6308C35.7928 14.3387 36.7854 13.0939 37.7329 11.8384C37.9548 11.5448 38.3364 11.3055 38.5816 11.0176C39.4532 9.99455 40.5004 9.00997 41.0948 7.9187C41.6801 6.84417 41.6666 5.67288 40.6499 4.61717C40.0606 4.0055 39.5623 3.3554 38.9778 2.74138C38.5041 2.24347 38.0208 1.73954 37.4351 1.30073C36.8558 0.866628 36.1427 0.510455 35.4495 0.0970112L35.4499 0.0972727Z"
						fill="#911D28"
					/>
				</svg>
				<ul class="header__links">
					<li>
						<UITheLink to="/"> главная </UITheLink>
					</li>
					<li>
						<UITheLink to="/catalogue"> Ассортимент </UITheLink>
					</li>
					<li>
						<UITheLink to="/contacts"> Контакты </UITheLink>
					</li>
				</ul>
			</div>
			<div class="header__user-links">
				<ul class="header__user">
					<li>
						<UITheLink to="/cart"> Корзина </UITheLink>
					</li>
					<li>
						<UITheLink v-if="token" to="/me">Профиль</UITheLink>
						<UITheLink v-else to="/login">Войти</UITheLink>
					</li>
					<li v-if="isPrivileged">
						<UITheLink to="/orders">Заказы</UITheLink>
					</li>
					<li v-if="role === 'ADMIN'">
						<UITheLink to="/users">Пользователи</UITheLink>
					</li>
				</ul>
			</div>
		</nav>
	</header>
	<main class="main__wrapper">
		<slot />
	</main>
	<NotificationPopup />
</template>

<style lang="scss">
.header {
	position: fixed;
	z-index: 2;
	width: 100vw;
	display: flex;
	height: 64px;
	justify-content: center;
	background-color: #ebe3e1;
	padding: 5px 0;
	&__nav {
		width: inherit;
		display: flex;
		justify-content: space-between;
		align-items: center;
		justify-items: center;
		width: 70%;
	}
	&__logo {
		margin-right: 20px;
	}
	&__main {
		display: flex;
		justify-content: flex-start;
	}
	&__links {
		list-style: none;
		font-size: 1.25rem;
		gap: 20px;
		display: flex;
		flex-grow: 1;
		justify-content: flex-start;
		align-items: center;
		min-width: 400px;
	}
	&__user {
		width: 500px;
		list-style: none;
		display: flex;
		justify-content: flex-end;
		gap: 20px;
	}
}
.main__wrapper {
	width: 70%;
	margin: 0 auto;
	padding-top: 64px;
}
</style>
